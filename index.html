<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ø®Ø±ÙŠØ·Ø© Ù…Ø·Ø§Ø¹Ù… Ø³ÙƒÙŠÙƒØ¯Ø©</title>

  <!-- Ø®Ø·ÙˆØ· Ø¹Ø±Ø¨ÙŠØ© -->
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&display=swap" rel="stylesheet" />
  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

  <style>
    :root {
      --bg: #0a0e1a;
      --card: #111827;
      --card-2: #0f172a;
      --muted: #94a3b8;
      --text: #f1f5f9;
      --primary: #22c55e;
      --primary-dark: #16a34a;
      --gold: #fbbf24;
      --danger: #ef4444;
      --border: rgba(255,255,255,.07);
      --shadow: rgba(0,0,0,.4);
      --radius: 14px;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    html, body {
      width: 100%; height: 100%;
      font-family: 'Cairo', sans-serif;
      background: var(--bg);
      color: var(--text);
      overflow: hidden;
    }

    /* â”€â”€â”€ Ø§Ù„Ø®Ø±ÙŠØ·Ø© â”€â”€â”€ */
    #map { width: 100%; height: 100vh; }

    /* Ø¥Ø²Ø§Ù„Ø© Ø®Ù„ÙÙŠØ© Ø£ÙŠÙ‚ÙˆÙ†Ø© DivIcon */
    .leaflet-div-icon {
      background: transparent !important;
      border: none !important;
    }

    /* â”€â”€â”€ Popup â”€â”€â”€ */
    .leaflet-popup-content-wrapper {
      background: linear-gradient(170deg, var(--card-2), var(--card));
      color: var(--text);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: 0 12px 40px var(--shadow);
      padding: 0;
    }
    .leaflet-popup-tip {
      background: var(--card);
      border: 1px solid var(--border);
    }
    .leaflet-popup-content { margin: 0 !important; }
    .leaflet-popup-close-button {
      color: var(--muted) !important;
      font-size: 20px !important;
      top: 6px !important;
      right: 10px !important;
    }

    /* â”€â”€â”€ Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù…Ø·Ø¹Ù… Ø¯Ø§Ø®Ù„ Ø§Ù„Ù€ Popup â”€â”€â”€ */
    .card { padding: 16px 18px; min-width: 270px; max-width: 310px; }

    .card-header {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 10px;
    }
    .card-icon {
      width: 42px; height: 42px;
      border-radius: 12px;
      display: grid; place-items: center;
      font-size: 20px;
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      box-shadow: 0 4px 14px rgba(34,197,94,.3);
      flex-shrink: 0;
    }
    .card-header .name {
      font-size: 15px;
      font-weight: 700;
      line-height: 1.3;
    }
    .card-header .type {
      font-size: 11.5px;
      color: var(--muted);
    }

    .card .desc {
      font-size: 12.5px;
      color: var(--muted);
      line-height: 1.7;
      margin-bottom: 12px;
    }

    /* Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„ÙƒØ¨ÙŠØ± */
    .rating-box {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: rgba(251,191,36,.06);
      border: 1px solid rgba(251,191,36,.15);
      border-radius: 10px;
      padding: 8px 12px;
      margin-bottom: 12px;
    }
    .rating-box .stars { color: var(--gold); font-size: 15px; letter-spacing: 1px; }
    .rating-box .score {
      font-size: 22px; font-weight: 800;
      background: linear-gradient(135deg, #fde68a, #f59e0b);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    /* Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ø§Ù„ÙØ±Ø¹ÙŠØ© */
    .sub-ratings { margin-bottom: 12px; }
    .sub-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 5px 0;
      font-size: 12px;
      color: #cbd5e1;
    }
    .sub-item + .sub-item { border-top: 1px solid var(--border); }
    .bar-wrap {
      width: 80px; height: 6px;
      background: rgba(255,255,255,.06);
      border-radius: 99px;
      overflow: hidden;
      margin: 0 10px;
      flex-shrink: 0;
    }
    .bar-fill {
      height: 100%;
      border-radius: 99px;
      transition: width .6s ease;
    }

    /* ØµÙ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª */
    .info-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      font-size: 12px;
      padding: 6px 0;
    }
    .info-row + .info-row { border-top: 1px solid var(--border); }
    .info-row .label { color: var(--muted); }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 5px;
      padding: 3px 10px;
      border-radius: 999px;
      font-size: 11px;
      font-weight: 700;
    }
    .badge.open {
      color: #86efac;
      background: rgba(34,197,94,.1);
      border: 1px solid rgba(34,197,94,.25);
    }
    .badge.closed {
      color: #fca5a5;
      background: rgba(239,68,68,.1);
      border: 1px solid rgba(239,68,68,.25);
    }

    /* â”€â”€â”€ Marker Ù…Ø®ØµØµ â”€â”€â”€ */
    .pin {
      position: relative;
      width: 36px; height: 36px;
      border-radius: 50% 50% 50% 0;
      background: linear-gradient(145deg, var(--primary), var(--primary-dark));
      transform: translate(-18px, -36px) rotate(-45deg);
      box-shadow:
        0 6px 20px rgba(34,197,94,.4),
        inset 0 0 0 2.5px rgba(255,255,255,.15);
      cursor: pointer;
      transition: transform .2s, filter .2s;
    }
    .pin::before {
      content: attr(data-icon);
      position: absolute; inset: 0;
      display: grid; place-items: center;
      transform: rotate(45deg);
      font-size: 15px;
      filter: drop-shadow(0 1px 2px rgba(0,0,0,.4));
    }
    .pin::after {
      content: "";
      position: absolute;
      width: 10px; height: 10px;
      background: rgba(255,255,255,.85);
      border-radius: 50%;
      top: 13px; left: 13px;
      transform: rotate(45deg);
      opacity: .15;
    }
    .pin:hover {
      transform: translate(-18px, -38px) rotate(-45deg) scale(1.12);
      filter: brightness(1.1);
    }

    /* â”€â”€â”€ Ù†Ø¨Ø¶ Ø­ÙˆÙ„ Ø§Ù„Ù…Ø§Ø±ÙƒØ± â”€â”€â”€ */
    .pulse-ring {
      position: absolute;
      width: 36px; height: 36px;
      border-radius: 50%;
      background: rgba(34,197,94,.25);
      transform: translate(-18px, -18px);
      animation: pulse 2.5s ease-out infinite;
      pointer-events: none;
    }
    @keyframes pulse {
      0%   { transform: translate(-18px,-18px) scale(1); opacity:.6; }
      100% { transform: translate(-18px,-18px) scale(2.5); opacity:0; }
    }

    /* â”€â”€â”€ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø®Ø±ÙŠØ·Ø© â”€â”€â”€ */
    .map-header {
      position: fixed;
      top: 12px; right: 12px;
      z-index: 1000;
      display: flex;
      align-items: center;
      gap: 10px;
      background: rgba(15,23,42,.85);
      backdrop-filter: blur(12px);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 10px 16px;
      box-shadow: 0 8px 28px var(--shadow);
    }
    .map-header .logo {
      font-size: 22px;
    }
    .map-header .title {
      font-size: 14px;
      font-weight: 700;
    }
    .map-header .subtitle {
      font-size: 11px;
      color: var(--muted);
    }

    /* â”€â”€â”€ Ø´Ø±ÙŠØ· Ø§Ù„Ø¨Ø­Ø« â”€â”€â”€ */
    .search-box {
      position: fixed;
      top: 12px; left: 12px;
      z-index: 1000;
      display: flex;
      align-items: center;
      background: rgba(15,23,42,.85);
      backdrop-filter: blur(12px);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 6px 12px;
      box-shadow: 0 8px 28px var(--shadow);
      width: 240px;
      transition: width .3s;
    }
    .search-box:focus-within { width: 300px; border-color: rgba(34,197,94,.4); }
    .search-box input {
      background: transparent;
      border: none;
      outline: none;
      color: var(--text);
      font-family: 'Cairo', sans-serif;
      font-size: 13px;
      width: 100%;
      padding: 6px 4px;
      direction: rtl;
    }
    .search-box input::placeholder { color: #64748b; }
    .search-icon { font-size: 16px; margin-left: 6px; flex-shrink: 0; }

    /* â”€â”€â”€ Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…Ø·Ø§Ø¹Ù… â”€â”€â”€ */
    .counter {
      position: fixed;
      bottom: 16px; right: 16px;
      z-index: 1000;
      background: rgba(15,23,42,.85);
      backdrop-filter: blur(12px);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 8px 14px;
      font-size: 12px;
      color: var(--muted);
      box-shadow: 0 6px 20px var(--shadow);
    }
    .counter strong { color: var(--primary); font-weight: 800; }

    /* â”€â”€â”€ Responsive â”€â”€â”€ */
    @media (max-width: 480px) {
      .search-box { width: 180px; }
      .search-box:focus-within { width: 220px; }
      .card { min-width: 240px; }
    }
  </style>
</head>
<body>

  <!-- Ø¹Ù†ÙˆØ§Ù† -->
  <div class="map-header">
    <span class="logo">ğŸ½ï¸</span>
    <div>
      <div class="title">Ø®Ø±ÙŠØ·Ø© Ù…Ø·Ø§Ø¹Ù… Ø³ÙƒÙŠÙƒØ¯Ø©</div>
      <div class="subtitle">Ø§ÙƒØªØ´Ù Ø£ÙØ¶Ù„ Ø§Ù„Ø£Ù…Ø§ÙƒÙ† ÙÙŠ Ø§Ù„ÙˆÙ„Ø§ÙŠØ©</div>
    </div>
  </div>

  <!-- Ø¨Ø­Ø« -->
  <div class="search-box">
    <span class="search-icon">ğŸ”</span>
    <input type="text" id="search" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ø·Ø¹Ù…..." autocomplete="off" />
  </div>

  <!-- Ø¹Ø¯Ø§Ø¯ -->
  <div class="counter" id="counter"></div>

  <!-- Ø§Ù„Ø®Ø±ÙŠØ·Ø© -->
  <div id="map"></div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script>
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    //  1) Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø®Ø±ÙŠØ·Ø©
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    const map = L.map("map", {
      center: [36.8765, 6.9065],
      zoom: 14,
      zoomControl: false,
      scrollWheelZoom: true,
      fadeAnimation: true,
      zoomAnimation: true,
      zoomSnap: 0.5,
      zoomDelta: 0.5,
      wheelPxPerZoomLevel: 100        // ØªÙ…Ø±ÙŠØ± Ø³Ù„Ø³
    });

    // Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªÙƒØ¨ÙŠØ± ÙÙŠ Ø§Ù„Ø²Ø§ÙˆÙŠØ© Ø§Ù„Ø³ÙÙ„Ù‰ Ø§Ù„ÙŠØ³Ø±Ù‰
    L.control.zoom({ position: "bottomleft" }).addTo(map);

    // Ø·Ø¨Ù‚Ø© Ø®Ø±ÙŠØ·Ø© Ø¯Ø§ÙƒÙ†Ø© Ø£Ù†ÙŠÙ‚Ø©
    L.tileLayer("https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png", {
      attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OSM</a> &copy; <a href="https://carto.com/">CARTO</a>',
      subdomains: "abcd",
      maxZoom: 19
    }).addTo(map);

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    //  2) Ø£ÙŠÙ‚ÙˆÙ†Ø© Ù…Ø§Ø±ÙƒØ± Ù…Ø®ØµØµØ©
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    function createPin(icon = "ğŸ½") {
      const html = `
        <div class="pulse-ring"></div>
        <div class="pin" data-icon="${icon}"></div>
      `;
      return L.divIcon({
        html,
        className: "",
        iconSize: [36, 36],
        iconAnchor: [18, 36],
        popupAnchor: [0, -32]
      });
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    //  3) Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ø§Ø¹Ù… Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© ÙÙŠ Ø³ÙƒÙŠÙƒØ¯Ø©
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    const restaurants = [
      {
        lat: 36.8788, lng: 6.9013,
        name: "Ù…Ø·Ø¹Ù… ÙˆØ§Ø¯ Ù…Ø¯ÙŠÙ†ÙŠ",
        nameEn: "Oued Mdini",
        type: "Ù…Ø´Ø§ÙˆÙŠ ÙˆØ£Ø·Ø¨Ø§Ù‚ ØªÙ‚Ù„ÙŠØ¯ÙŠØ©",
        icon: "ğŸ”¥",
        description: "Ù…Ø·Ø¹Ù… Ø¨Ø¥Ø·Ù„Ø§Ù„Ø© Ø¨Ø§Ù†ÙˆØ±Ø§Ù…ÙŠØ© Ø±Ø§Ø¦Ø¹Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø¬Ø¨Ø§Ù„ ÙˆØ§Ù„Ø³Ù‡ÙˆÙ„ØŒ Ù…Ø´Ù‡ÙˆØ± Ø¨Ø§Ù„Ù…Ø´Ø§ÙˆÙŠ ÙˆØ§Ù„Ù…Ø®Ø¨ÙˆØ²Ø§Øª Ø§Ù„Ø·Ø§Ø²Ø¬Ø©. Ù…Ø«Ø§Ù„ÙŠ Ù„Ù„Ø¹Ø§Ø¦Ù„Ø§Øª.",
        rating: 8.8,
        food: 9.0, service: 8.5, cleanliness: 8.8, price: 9.0,
        status: "open",
        hours: "11:00 â€“ 23:00"
      },
      {
        lat: 36.8810, lng: 6.9100,
        name: "Ù…Ø·Ø¹Ù… Ù„Ùˆ ÙØ§Ø± Ø´ÙŠÙ‡ Ù„ÙˆÙŠØ²Ø§",
        nameEn: "Le Phare Chez Louiza",
        type: "Ù…Ø£ÙƒÙˆÙ„Ø§Øª Ø¨Ø­Ø±ÙŠØ©",
        icon: "ğŸŸ",
        description: "Ø¨Ø¬Ø§Ù†Ø¨ Ø§Ù„Ø¨Ø­Ø± Ù…Ø¨Ø§Ø´Ø±Ø© Ù…Ø¹ Ø´Ø±ÙØ© Ø±Ø§Ø¦Ø¹Ø©ØŒ Ù…ØªØ®ØµØµ ÙÙŠ Ø§Ù„Ù…Ø£ÙƒÙˆÙ„Ø§Øª Ø§Ù„Ø¨Ø­Ø±ÙŠØ© Ø§Ù„Ø·Ø§Ø²Ø¬Ø© ÙˆØ§Ù„Ø£Ø·Ø¨Ø§Ù‚ Ø§Ù„Ù…Ø­Ù„ÙŠØ©.",
        rating: 9.0,
        food: 9.3, service: 8.6, cleanliness: 9.0, price: 8.4,
        status: "open",
        hours: "12:00 â€“ 23:30"
      },
      {
        lat: 36.8752, lng: 6.9045,
        name: "Ù…Ø·Ø¹Ù… Ù†ÙŠÙˆ Ø¯Ø§ÙŠ",
        nameEn: "New Day Skikda",
        type: "Ø¨ÙŠØªØ²Ø§ ÙˆÙˆØ¬Ø¨Ø§Øª Ø³Ø±ÙŠØ¹Ø©",
        icon: "ğŸ•",
        description: "Ø´Ø§Ø±Ø¹ Ù…Ø­Ù…ÙˆØ¯ Ù†ÙÙŠØ±ØŒ Ù…Ø´Ù‡ÙˆØ± Ø¨Ø§Ù„Ø¨ÙŠØªØ²Ø§ Ø§Ù„Ø¥ÙŠØ·Ø§Ù„ÙŠØ© ÙˆØ§Ù„ÙˆØ¬Ø¨Ø§Øª Ø§Ù„Ø³Ø±ÙŠØ¹Ø© Ù…Ø¹ Ø¬Ù„Ø³Ø§Øª Ø¯Ø§Ø®Ù„ÙŠØ© ÙˆØ®Ø§Ø±Ø¬ÙŠØ© Ù…Ø±ÙŠØ­Ø©.",
        rating: 8.5,
        food: 8.7, service: 8.3, cleanliness: 8.4, price: 9.0,
        status: "open",
        hours: "10:00 â€“ 00:00"
      },
      {
        lat: 36.8770, lng: 6.9120,
        name: "Ù…Ø·Ø¹Ù… Ø¬ÙŠÙ† Ø¯Ø§Ø±Ùƒ",
        nameEn: "Jeanne D'Arc",
        type: "Ù…Ø£ÙƒÙˆÙ„Ø§Øª Ø¨Ø­Ø±ÙŠØ© ÙˆÙ…Ø­Ù„ÙŠØ©",
        icon: "ğŸ¦",
        description: "Ø¨Ø§Ù„Ù‚Ø±Ø¨ Ù…Ù† Ø§Ù„Ø¨Ø­Ø±ØŒ ÙŠÙ‚Ø¯Ù… Ø£Ø³Ù…Ø§Ùƒ Ù…Ø´ÙˆÙŠØ© ÙˆÙ…Ù‚Ù„ÙŠØ© Ø·Ø§Ø²Ø¬Ø© Ø¥Ù„Ù‰ Ø¬Ø§Ù†Ø¨ Ù…Ø¹Ø¬Ù†Ø§Øª Ù…Ø­Ù„ÙŠØ© Ù„ÙˆØ¬Ø¨Ø§Øª Ø§Ù„ÙØ·ÙˆØ±.",
        rating: 8.6,
        food: 8.9, service: 8.2, cleanliness: 8.5, price: 8.3,
        status: "open",
        hours: "08:00 â€“ 22:30"
      },
      {
        lat: 36.8740, lng: 6.8980,
        name: "Ù…Ø·Ø¹Ù… Ù„Ø§ Ø¬Ø±Ø§Ù†Ø¯ ÙØ§Ø¬",
        nameEn: "La Grande Vague",
        type: "Ù…Ø£ÙƒÙˆÙ„Ø§Øª Ø¨Ø­Ø±ÙŠØ© ÙØ§Ø®Ø±Ø©",
        icon: "ğŸŒŠ",
        description: "ØªØ´ÙƒÙŠÙ„Ø© ÙˆØ§Ø³Ø¹Ø© Ù…Ù† Ø§Ù„ÙƒØ§Ù„ÙŠÙ…Ø§Ø±ÙŠ ÙˆØ§Ù„Ø¬Ù…Ø¨Ø±ÙŠ ÙˆØ§Ù„Ø³Ù…Ùƒ Ø§Ù„Ù…Ø´ÙˆÙŠØŒ Ø¬Ù„Ø³Ø§Øª Ù‡Ø§Ø¯Ø¦Ø© Ù…Ù†Ø§Ø³Ø¨Ø© Ù„Ù„Ø¹Ø§Ø¦Ù„Ø§Øª.",
        rating: 8.9,
        food: 9.1, service: 8.7, cleanliness: 9.0, price: 8.2,
        status: "open",
        hours: "12:00 â€“ 23:00"
      },
      {
        lat: 36.8695, lng: 6.9060,
        name: "Ù…Ø·Ø¹Ù… Ø§Ù„Ø³Ø§Ø­Ù„",
        nameEn: "Essahel",
        type: "Ø£Ø·Ø¨Ø§Ù‚ Ù…Ø­Ù„ÙŠØ© ØªÙ‚Ù„ÙŠØ¯ÙŠØ©",
        icon: "ğŸ–",
        description: "Ø£Ø·Ø¨Ø§Ù‚ Ù…Ø­Ù„ÙŠØ© Ø¨ØªØªØ¨ÙŠÙ„Ø§Øª ÙØ±ÙŠØ¯Ø©ØŒ Ø®Ø§ØµØ© Ø§Ù„Ù„Ø­ÙˆÙ… ÙˆØ§Ù„Ø£Ø³Ù…Ø§Ùƒ Ù…Ø¹ Ù…Ø®Ø¨ÙˆØ²Ø§Øª Ø·Ø§Ø²Ø¬Ø© ÙŠÙˆÙ…ÙŠØ§Ù‹.",
        rating: 8.4,
        food: 8.6, service: 8.1, cleanliness: 8.5, price: 8.8,
        status: "closed",
        hours: "11:30 â€“ 22:00"
      },
      {
        lat: 36.8820, lng: 6.9070,
        name: "Ù…Ø·Ø¹Ù… Ø§Ù„Ø¨Ù‡Ø¬Ø©",
        nameEn: "El Bahdja",
        type: "Ø£ÙƒÙ„Ø§Øª Ø³Ø±ÙŠØ¹Ø©",
        icon: "ğŸ”",
        description: "Ø£ÙƒÙ„Ø§Øª Ø³Ø±ÙŠØ¹Ø© Ù…ØªÙ†ÙˆØ¹Ø© Ù…Ø¹ Ø¨ÙŠØªØ²Ø§ ÙˆØ´Ø§ÙˆØ±Ù…Ø§ØŒ Ø£Ø³Ø¹Ø§Ø± Ù…Ù†Ø§Ø³Ø¨Ø© ÙˆØ®Ø¯Ù…Ø© Ø³Ø±ÙŠØ¹Ø©.",
        rating: 8.2,
        food: 8.4, service: 8.0, cleanliness: 8.1, price: 9.2,
        status: "open",
        hours: "10:00 â€“ 01:00"
      },
      {
        lat: 36.8730, lng: 6.9110,
        name: "Ù…Ø·Ø¹Ù… Ø§Ù„Ø±ÙŠÙ",
        nameEn: "El Rif",
        type: "Ù…Ø´Ø§ÙˆÙŠ Ø¹Ø§Ø¦Ù„ÙŠØ©",
        icon: "ğŸ¥©",
        description: "Ù…Ø·Ø¹Ù… Ø¹Ø§Ø¦Ù„ÙŠ ÙÙŠ Ù‚Ù„Ø¨ Ø³ÙƒÙŠÙƒØ¯Ø© Ù…Ø´Ù‡ÙˆØ± Ø¨Ø§Ù„Ù…Ø´Ø§ÙˆÙŠ ÙˆØ§Ù„Ø£Ø·Ø¨Ø§Ù‚ Ø§Ù„ØªÙ‚Ù„ÙŠØ¯ÙŠØ© Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠØ©.",
        rating: 8.7,
        food: 9.0, service: 8.4, cleanliness: 8.6, price: 8.5,
        status: "open",
        hours: "12:00 â€“ 23:30"
      }
    ];

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    //  4) Ø¯ÙˆØ§Ù„ Ù…Ø³Ø§Ø¹Ø¯Ø©
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    // ØªØ­ÙˆÙŠÙ„ Ù…Ù† /10 Ø¥Ù„Ù‰ Ù†Ø¬ÙˆÙ… /5
    function stars(n) {
      const full = Math.round(n / 2);
      return "â˜…".repeat(full) + "â˜†".repeat(5 - full);
    }

    // Ù„ÙˆÙ† Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚ÙŠÙŠÙ…
    function barColor(n) {
      if (n >= 9) return "linear-gradient(90deg,#22c55e,#4ade80)";
      if (n >= 8) return "linear-gradient(90deg,#eab308,#facc15)";
      if (n >= 7) return "linear-gradient(90deg,#f97316,#fb923c)";
      return "linear-gradient(90deg,#ef4444,#f87171)";
    }

    // Ø¨Ù†Ø§Ø¡ HTML Ù„Ù„Ø¨Ø·Ø§Ù‚Ø©
    function buildPopup(r) {
      const isOpen = r.status === "open";
      return `
        <div class="card">
          <!-- Ø§Ù„ØªØ±ÙˆÙŠØ³Ø© -->
          <div class="card-header">
            <div class="card-icon">${r.icon}</div>
            <div>
              <div class="name">${r.name}</div>
              <div class="type">${r.type}</div>
            </div>
          </div>

          <!-- Ø§Ù„ÙˆØµÙ -->
          <p class="desc">${r.description}</p>

          <!-- Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø¹Ø§Ù… -->
          <div class="rating-box">
            <div>
              <div class="stars">${stars(r.rating)}</div>
            </div>
            <div class="score">${r.rating}</div>
          </div>

          <!-- ØªÙ‚ÙŠÙŠÙ…Ø§Øª ÙØ±Ø¹ÙŠØ© -->
          <div class="sub-ratings">
            ${subRating("Ø¬ÙˆØ¯Ø© Ø§Ù„Ø£ÙƒÙ„", r.food)}
            ${subRating("Ø§Ù„Ø®Ø¯Ù…Ø©", r.service)}
            ${subRating("Ø§Ù„Ù†Ø¸Ø§ÙØ©", r.cleanliness)}
            ${subRating("Ø§Ù„Ø³Ø¹Ø± / Ø§Ù„Ø¬ÙˆØ¯Ø©", r.price)}
          </div>

          <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª -->
          <div class="info-row">
            <span class="label">â° Ø£ÙˆÙ‚Ø§Øª Ø§Ù„Ø¹Ù…Ù„</span>
            <span>${r.hours}</span>
          </div>
          <div class="info-row">
            <span class="label">ğŸ“Œ Ø§Ù„Ø­Ø§Ù„Ø©</span>
            <span class="badge ${isOpen ? 'open' : 'closed'}">
              <span style="font-size:8px;">â—</span>
              ${isOpen ? "Ù…ÙØªÙˆØ­ Ø§Ù„Ø¢Ù†" : "Ù…ØºÙ„Ù‚ Ø­Ø§Ù„ÙŠØ§Ù‹"}
            </span>
          </div>
        </div>
      `;
    }

    function subRating(label, value) {
      const pct = value * 10;
      return `
        <div class="sub-item">
          <span>${label}</span>
          <div class="bar-wrap">
            <div class="bar-fill" style="width:${pct}%;background:${barColor(value)}"></div>
          </div>
          <strong>${value}</strong>
        </div>
      `;
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    //  5) Ø±Ø³Ù… Ø§Ù„Ù…Ø§Ø±ÙƒØ±Ø§Øª
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    let markers = [];

    function renderMarkers(list) {
      // Ø­Ø°Ù Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©
      markers.forEach(m => map.removeLayer(m));
      markers = [];

      list.forEach(r => {
        const m = L.marker([r.lat, r.lng], { icon: createPin(r.icon) })
          .addTo(map)
          .bindPopup(buildPopup(r), { maxWidth: 320, closeButton: true });
        m._data = r; // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ø¨Ø­Ø«
        markers.push(m);
      });

      document.getElementById("counter").innerHTML =
        `ğŸ´ ÙŠØªÙ… Ø¹Ø±Ø¶ <strong>${list.length}</strong> Ù…Ù† Ø£ØµÙ„ <strong>${restaurants.length}</strong> Ù…Ø·Ø¹Ù…`;
    }

    renderMarkers(restaurants);

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    //  6) Ø§Ù„Ø¨Ø­Ø«
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    document.getElementById("search").addEventListener("input", function () {
      const q = this.value.trim().toLowerCase();
      if (!q) {
        renderMarkers(restaurants);
        return;
      }
      const filtered = restaurants.filter(r =>
        r.name.includes(q) ||
        r.nameEn.toLowerCase().includes(q) ||
        r.type.includes(q) ||
        r.description.includes(q)
      );
      renderMarkers(filtered);

      // ØªÙƒØ¨ÙŠØ± Ø¹Ù„Ù‰ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
      if (filtered.length) {
        const group = L.featureGroup(markers);
        map.fitBounds(group.getBounds().pad(0.3), { animate: true, duration: 0.5 });
      }
    });
  </script>
</body>
</html>
