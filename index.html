<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Ø®Ø±ÙŠØ·Ø© Ù…Ø·Ø§Ø¹Ù… Ø³ÙƒÙŠÙƒØ¯Ø©</title>

  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

  <style>
    :root {
      --bg: #0a0e1a;
      --card: #111827;
      --card-2: #0f172a;
      --muted: #94a3b8;
      --text: #f1f5f9;
      --primary: #22c55e;
      --primary-dark: #16a34a;
      --gold: #fbbf24;
      --danger: #ef4444;
      --border: rgba(255,255,255,.07);
      --shadow: rgba(0,0,0,.4);
      --radius: 14px;

      /* Ø£Ø­Ø¬Ø§Ù… Ù…ØªØºÙŠØ±Ø© */
      --pin-size: 36px;
      --pin-half: 18px;
      --pin-font: 15px;
      --pin-dot: 10px;
      --pin-dot-pos: 13px;
      --pulse-size: 36px;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    html, body {
      width: 100%; height: 100%;
      font-family: 'Cairo', sans-serif;
      background: var(--bg);
      color: var(--text);
      overflow: hidden;
    }

    #map { width: 100%; height: 100vh; }

    .leaflet-div-icon {
      background: transparent !important;
      border: none !important;
    }

    /* â”€â”€â”€ Popup â”€â”€â”€ */
    .leaflet-popup-content-wrapper {
      background: linear-gradient(170deg, var(--card-2), var(--card));
      color: var(--text);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: 0 12px 40px var(--shadow);
      padding: 0;
    }
    .leaflet-popup-tip {
      background: var(--card);
      border: 1px solid var(--border);
    }
    .leaflet-popup-content { margin: 0 !important; }
    .leaflet-popup-close-button {
      color: var(--muted) !important;
      font-size: 20px !important;
      top: 6px !important;
      right: 10px !important;
    }

    /* â”€â”€â”€ Ø¨Ø·Ø§Ù‚Ø© Popup â”€â”€â”€ */
    .card { padding: 14px 16px; min-width: 260px; max-width: 300px; }

    .card-header {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 8px;
    }
    .card-icon {
      width: 40px; height: 40px;
      border-radius: 10px;
      display: grid; place-items: center;
      font-size: 18px;
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      box-shadow: 0 4px 14px rgba(34,197,94,.3);
      flex-shrink: 0;
    }
    .card-header .name { font-size: 14px; font-weight: 700; line-height: 1.3; }
    .card-header .type { font-size: 11px; color: var(--muted); }

    .card .desc {
      font-size: 12px;
      color: var(--muted);
      line-height: 1.65;
      margin-bottom: 10px;
    }

    .rating-box {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: rgba(251,191,36,.06);
      border: 1px solid rgba(251,191,36,.15);
      border-radius: 10px;
      padding: 6px 10px;
      margin-bottom: 10px;
    }
    .rating-box .stars { color: var(--gold); font-size: 14px; letter-spacing: 1px; }
    .rating-box .score {
      font-size: 20px; font-weight: 800;
      background: linear-gradient(135deg, #fde68a, #f59e0b);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .sub-ratings { margin-bottom: 10px; }
    .sub-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 4px 0;
      font-size: 11.5px;
      color: #cbd5e1;
    }
    .sub-item + .sub-item { border-top: 1px solid var(--border); }
    .sub-item .lbl { flex: 1; min-width: 0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .bar-wrap {
      width: 65px; height: 5px;
      background: rgba(255,255,255,.06);
      border-radius: 99px;
      overflow: hidden;
      margin: 0 8px;
      flex-shrink: 0;
    }
    .bar-fill { height: 100%; border-radius: 99px; }
    .sub-item strong { flex-shrink: 0; width: 22px; text-align: left; font-size: 11px; }

    .info-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      font-size: 11.5px;
      padding: 5px 0;
    }
    .info-row + .info-row { border-top: 1px solid var(--border); }
    .info-row .label { color: var(--muted); }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 2px 8px;
      border-radius: 999px;
      font-size: 10.5px;
      font-weight: 700;
    }
    .badge.open {
      color: #86efac;
      background: rgba(34,197,94,.1);
      border: 1px solid rgba(34,197,94,.25);
    }
    .badge.closed {
      color: #fca5a5;
      background: rgba(239,68,68,.1);
      border: 1px solid rgba(239,68,68,.25);
    }

    /* â”€â”€â”€ Marker â”€â”€â”€ */
    .pin {
      position: relative;
      width: var(--pin-size); height: var(--pin-size);
      border-radius: 50% 50% 50% 0;
      background: linear-gradient(145deg, var(--primary), var(--primary-dark));
      transform: translate(calc(-1 * var(--pin-half)), calc(-1 * var(--pin-size))) rotate(-45deg);
      box-shadow:
        0 6px 20px rgba(34,197,94,.4),
        inset 0 0 0 2.5px rgba(255,255,255,.15);
      cursor: pointer;
      transition: transform .2s, filter .2s;
    }
    .pin::before {
      content: attr(data-icon);
      position: absolute; inset: 0;
      display: grid; place-items: center;
      transform: rotate(45deg);
      font-size: var(--pin-font);
      filter: drop-shadow(0 1px 2px rgba(0,0,0,.4));
    }
    .pin::after {
      content: "";
      position: absolute;
      width: var(--pin-dot); height: var(--pin-dot);
      background: rgba(255,255,255,.85);
      border-radius: 50%;
      top: var(--pin-dot-pos); left: var(--pin-dot-pos);
      transform: rotate(45deg);
      opacity: .15;
    }
    .pin:hover {
      transform: translate(calc(-1 * var(--pin-half)), calc(-1 * var(--pin-size) - 2px)) rotate(-45deg) scale(1.12);
      filter: brightness(1.1);
    }

    .pulse-ring {
      position: absolute;
      width: var(--pulse-size); height: var(--pulse-size);
      border-radius: 50%;
      background: rgba(34,197,94,.25);
      transform: translate(calc(-1 * var(--pin-half)), calc(-1 * var(--pin-half)));
      animation: pulse 2.5s ease-out infinite;
      pointer-events: none;
    }
    @keyframes pulse {
      0%   { transform: translate(calc(-1 * var(--pin-half)), calc(-1 * var(--pin-half))) scale(1); opacity:.6; }
      100% { transform: translate(calc(-1 * var(--pin-half)), calc(-1 * var(--pin-half))) scale(2.5); opacity:0; }
    }

    /* â”€â”€â”€ Header â”€â”€â”€ */
    .map-header {
      position: fixed;
      top: 10px; right: 10px;
      z-index: 1000;
      display: flex;
      align-items: center;
      gap: 8px;
      background: rgba(15,23,42,.88);
      backdrop-filter: blur(12px);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 8px 14px;
      box-shadow: 0 8px 28px var(--shadow);
    }
    .map-header .logo { font-size: 20px; }
    .map-header .title { font-size: 13px; font-weight: 700; }
    .map-header .subtitle { font-size: 10.5px; color: var(--muted); }

    /* â”€â”€â”€ Search â”€â”€â”€ */
    .search-box {
      position: fixed;
      top: 10px; left: 10px;
      z-index: 1000;
      display: flex;
      align-items: center;
      background: rgba(15,23,42,.88);
      backdrop-filter: blur(12px);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 5px 10px;
      box-shadow: 0 8px 28px var(--shadow);
      width: 220px;
      transition: width .3s;
    }
    .search-box:focus-within { width: 280px; border-color: rgba(34,197,94,.4); }
    .search-box input {
      background: transparent;
      border: none; outline: none;
      color: var(--text);
      font-family: 'Cairo', sans-serif;
      font-size: 12px;
      width: 100%;
      padding: 5px 4px;
      direction: rtl;
    }
    .search-box input::placeholder { color: #64748b; }
    .search-icon { font-size: 14px; margin-left: 6px; flex-shrink: 0; }

    /* â”€â”€â”€ Counter â”€â”€â”€ */
    .counter {
      position: fixed;
      bottom: 14px; right: 14px;
      z-index: 1000;
      background: rgba(15,23,42,.88);
      backdrop-filter: blur(12px);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 6px 12px;
      font-size: 11px;
      color: var(--muted);
      box-shadow: 0 6px 20px var(--shadow);
    }
    .counter strong { color: var(--primary); font-weight: 800; }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       ğŸ“± MOBILE â€“ Ø´Ø§Ø´Ø§Øª Ø£Ù‚Ù„ Ù…Ù† 600px
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    @media (max-width: 600px) {
      :root {
        --pin-size: 26px;
        --pin-half: 13px;
        --pin-font: 11px;
        --pin-dot: 7px;
        --pin-dot-pos: 9.5px;
        --pulse-size: 26px;
      }

      /* Header ØµØºÙŠØ± */
      .map-header {
        top: 6px; right: 6px;
        padding: 5px 10px;
        gap: 6px;
        border-radius: 10px;
      }
      .map-header .logo { font-size: 16px; }
      .map-header .title { font-size: 11px; }
      .map-header .subtitle { font-size: 9px; }

      /* Search ØµØºÙŠØ± ÙˆÙ„Ø§ ÙŠØªØ¯Ø§Ø®Ù„ */
      .search-box {
        top: auto;
        bottom: 14px;
        left: 50%;
        transform: translateX(-50%);
        right: auto;
        width: calc(100% - 24px);
        max-width: 320px;
        padding: 5px 10px;
        border-radius: 10px;
      }
      .search-box:focus-within { width: calc(100% - 24px); max-width: 320px; }
      .search-box input { font-size: 12px; padding: 6px 4px; }
      .search-icon { font-size: 13px; }

      /* Counter ÙÙˆÙ‚ Ø§Ù„Ø¨Ø­Ø« */
      .counter {
        bottom: 60px;
        right: 50%;
        transform: translateX(50%);
        font-size: 10px;
        padding: 4px 10px;
        border-radius: 8px;
      }

      /* Popup Ø£ØµØºØ± */
      .leaflet-popup-content-wrapper { border-radius: 12px; }
      .card {
        padding: 10px 12px;
        min-width: 220px;
        max-width: 260px;
      }
      .card-icon { width: 32px; height: 32px; font-size: 14px; border-radius: 8px; }
      .card-header { gap: 8px; margin-bottom: 6px; }
      .card-header .name { font-size: 12.5px; }
      .card-header .type { font-size: 10px; }
      .card .desc { font-size: 11px; margin-bottom: 8px; line-height: 1.55; }

      .rating-box { padding: 5px 8px; margin-bottom: 8px; border-radius: 8px; }
      .rating-box .stars { font-size: 12px; }
      .rating-box .score { font-size: 17px; }

      .sub-item { font-size: 10.5px; padding: 3px 0; }
      .bar-wrap { width: 50px; height: 4px; margin: 0 6px; }
      .sub-item strong { font-size: 10px; }
      .sub-ratings { margin-bottom: 8px; }

      .info-row { font-size: 10.5px; padding: 4px 0; }
      .badge { font-size: 9.5px; padding: 2px 6px; }

      .leaflet-popup-close-button {
        font-size: 18px !important;
        top: 4px !important;
        right: 8px !important;
      }

      /* Zoom Ø¨Ø¹ÙŠØ¯ Ø¹Ù† Ø§Ù„Ø¹Ù†Ø§ØµØ± */
      .leaflet-bottom.leaflet-left { bottom: 65px !important; }
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       ğŸ“± Ø´Ø§Ø´Ø§Øª ØµØºÙŠØ±Ø© Ø¬Ø¯Ø§Ù‹ Ø£Ù‚Ù„ Ù…Ù† 380px
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    @media (max-width: 380px) {
      :root {
        --pin-size: 22px;
        --pin-half: 11px;
        --pin-font: 9px;
        --pin-dot: 6px;
        --pin-dot-pos: 8px;
        --pulse-size: 22px;
      }

      .map-header .logo { font-size: 14px; }
      .map-header .title { font-size: 10px; }
      .map-header .subtitle { display: none; }

      .card { min-width: 200px; max-width: 230px; padding: 8px 10px; }
      .card-icon { width: 28px; height: 28px; font-size: 12px; }
      .card-header .name { font-size: 11.5px; }
      .card .desc { font-size: 10px; }
      .rating-box .score { font-size: 15px; }
      .rating-box .stars { font-size: 11px; }
      .bar-wrap { width: 40px; }
    }
  </style>
</head>
<body>

  <div class="map-header">
    <span class="logo">ğŸ½ï¸</span>
    <div>
      <div class="title">Ù…Ø·Ø§Ø¹Ù… Ø³ÙƒÙŠÙƒØ¯Ø©</div>
      <div class="subtitle">Ø§ÙƒØªØ´Ù Ø£ÙØ¶Ù„ Ø§Ù„Ø£Ù…Ø§ÙƒÙ†</div>
    </div>
  </div>

  <div class="search-box">
    <span class="search-icon">ğŸ”</span>
    <input type="text" id="search" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ø·Ø¹Ù…..." autocomplete="off" />
  </div>

  <div class="counter" id="counter"></div>

  <div id="map"></div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script>
    // â”€â”€â”€ ÙƒØ´Ù Ø§Ù„Ù‡Ø§ØªÙ â”€â”€â”€
    const isMobile = window.innerWidth <= 600;

    // â”€â”€â”€ Ø§Ù„Ø®Ø±ÙŠØ·Ø© â”€â”€â”€
    const map = L.map("map", {
      center: [36.8765, 6.9065],
      zoom: isMobile ? 13.5 : 14,
      zoomControl: false,
      scrollWheelZoom: true,
      fadeAnimation: true,
      zoomAnimation: true,
      zoomSnap: 0.5,
      zoomDelta: 0.5,
      wheelPxPerZoomLevel: 100,
      tap: true
    });

    L.control.zoom({ position: "bottomleft" }).addTo(map);

    L.tileLayer("https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png", {
      attribution: '&copy; OSM &copy; CARTO',
      subdomains: "abcd",
      maxZoom: 19
    }).addTo(map);

    // â”€â”€â”€ Ø£ÙŠÙ‚ÙˆÙ†Ø© Marker Ø­Ø³Ø¨ Ø­Ø¬Ù… Ø§Ù„Ø´Ø§Ø´Ø© â”€â”€â”€
    function createPin(icon = "ğŸ½") {
      const size = isMobile ? 26 : 36;
      const half = size / 2;
      const html = `
        <div class="pulse-ring"></div>
        <div class="pin" data-icon="${icon}"></div>
      `;
      return L.divIcon({
        html,
        className: "",
        iconSize: [size, size],
        iconAnchor: [half, size],
        popupAnchor: [0, isMobile ? -22 : -30]
      });
    }

    // â”€â”€â”€ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ø§Ø¹Ù… â”€â”€â”€
    const restaurants = [
      {
        lat: 36.8788, lng: 6.9013,
        name: "Ù…Ø·Ø¹Ù… ÙˆØ§Ø¯ Ù…Ø¯ÙŠÙ†ÙŠ",
        nameEn: "Oued Mdini",
        type: "Ù…Ø´Ø§ÙˆÙŠ ÙˆØ£Ø·Ø¨Ø§Ù‚ ØªÙ‚Ù„ÙŠØ¯ÙŠØ©",
        icon: "ğŸ”¥",
        description: "Ø¥Ø·Ù„Ø§Ù„Ø© Ø¨Ø§Ù†ÙˆØ±Ø§Ù…ÙŠØ© Ø±Ø§Ø¦Ø¹Ø©ØŒ Ù…Ø´Ù‡ÙˆØ± Ø¨Ø§Ù„Ù…Ø´Ø§ÙˆÙŠ ÙˆØ§Ù„Ù…Ø®Ø¨ÙˆØ²Ø§Øª Ø§Ù„Ø·Ø§Ø²Ø¬Ø©.",
        rating: 8.8,
        food: 9.0, service: 8.5, cleanliness: 8.8, price: 9.0,
        status: "open", hours: "11:00 â€“ 23:00"
      },
      {
        lat: 36.8810, lng: 6.9100,
        name: "Ù…Ø·Ø¹Ù… Ù„Ùˆ ÙØ§Ø± Ø´ÙŠÙ‡ Ù„ÙˆÙŠØ²Ø§",
        nameEn: "Le Phare Chez Louiza",
        type: "Ù…Ø£ÙƒÙˆÙ„Ø§Øª Ø¨Ø­Ø±ÙŠØ©",
        icon: "ğŸŸ",
        description: "Ø¨Ø¬Ø§Ù†Ø¨ Ø§Ù„Ø¨Ø­Ø± Ù…Ø¨Ø§Ø´Ø±Ø©ØŒ Ù…ØªØ®ØµØµ ÙÙŠ Ø§Ù„Ù…Ø£ÙƒÙˆÙ„Ø§Øª Ø§Ù„Ø¨Ø­Ø±ÙŠØ© Ø§Ù„Ø·Ø§Ø²Ø¬Ø©.",
        rating: 9.0,
        food: 9.3, service: 8.6, cleanliness: 9.0, price: 8.4,
        status: "open", hours: "12:00 â€“ 23:30"
      },
      {
        lat: 36.8752, lng: 6.9045,
        name: "Ù…Ø·Ø¹Ù… Ù†ÙŠÙˆ Ø¯Ø§ÙŠ",
        nameEn: "New Day Skikda",
        type: "Ø¨ÙŠØªØ²Ø§ ÙˆÙˆØ¬Ø¨Ø§Øª Ø³Ø±ÙŠØ¹Ø©",
        icon: "ğŸ•",
        description: "Ù…Ø´Ù‡ÙˆØ± Ø¨Ø§Ù„Ø¨ÙŠØªØ²Ø§ Ø§Ù„Ø¥ÙŠØ·Ø§Ù„ÙŠØ© Ù…Ø¹ Ø¬Ù„Ø³Ø§Øª Ø¯Ø§Ø®Ù„ÙŠØ© ÙˆØ®Ø§Ø±Ø¬ÙŠØ© Ù…Ø±ÙŠØ­Ø©.",
        rating: 8.5,
        food: 8.7, service: 8.3, cleanliness: 8.4, price: 9.0,
        status: "open", hours: "10:00 â€“ 00:00"
      },
      {
        lat: 36.8770, lng: 6.9120,
        name: "Ù…Ø·Ø¹Ù… Ø¬ÙŠÙ† Ø¯Ø§Ø±Ùƒ",
        nameEn: "Jeanne D'Arc",
        type: "Ù…Ø£ÙƒÙˆÙ„Ø§Øª Ø¨Ø­Ø±ÙŠØ© ÙˆÙ…Ø­Ù„ÙŠØ©",
        icon: "ğŸ¦",
        description: "Ø¨Ø§Ù„Ù‚Ø±Ø¨ Ù…Ù† Ø§Ù„Ø¨Ø­Ø±ØŒ Ø£Ø³Ù…Ø§Ùƒ Ù…Ø´ÙˆÙŠØ© ÙˆÙ…Ù‚Ù„ÙŠØ© Ù…Ø¹ Ù…Ø¹Ø¬Ù†Ø§Øª Ù…Ø­Ù„ÙŠØ©.",
        rating: 8.6,
        food: 8.9, service: 8.2, cleanliness: 8.5, price: 8.3,
        status: "open", hours: "08:00 â€“ 22:30"
      },
      {
        lat: 36.8740, lng: 6.8980,
        name: "Ù…Ø·Ø¹Ù… Ù„Ø§ ï¿½ï¿½Ø±Ø§Ù†Ø¯ ÙØ§Ø¬",
        nameEn: "La Grande Vague",
        type: "Ù…Ø£ÙƒÙˆÙ„Ø§Øª Ø¨Ø­Ø±ÙŠØ© ÙØ§Ø®Ø±Ø©",
        icon: "ğŸŒŠ",
        description: "ÙƒØ§Ù„ÙŠÙ…Ø§Ø±ÙŠ ÙˆØ¬Ù…Ø¨Ø±ÙŠ ÙˆØ³Ù…Ùƒ Ù…Ø´ÙˆÙŠØŒ Ø¬Ù„Ø³Ø§Øª Ù‡Ø§Ø¯Ø¦Ø© Ù„Ù„Ø¹Ø§Ø¦Ù„Ø§Øª.",
        rating: 8.9,
        food: 9.1, service: 8.7, cleanliness: 9.0, price: 8.2,
        status: "open", hours: "12:00 â€“ 23:00"
      },
      {
        lat: 36.8695, lng: 6.9060,
        name: "Ù…Ø·Ø¹Ù… Ø§Ù„Ø³Ø§Ø­Ù„",
        nameEn: "Essahel",
        type: "Ø£Ø·Ø¨Ø§Ù‚ Ù…Ø­Ù„ÙŠØ© ØªÙ‚Ù„ÙŠØ¯ÙŠØ©",
        icon: "ğŸ–",
        description: "Ø£Ø·Ø¨Ø§Ù‚ Ù…Ø­Ù„ÙŠØ© Ø¨ØªØªØ¨ÙŠÙ„Ø§Øª ÙØ±ÙŠØ¯Ø© Ù…Ø¹ Ù…Ø®Ø¨ÙˆØ²Ø§Øª Ø·Ø§Ø²Ø¬Ø© ÙŠÙˆÙ…ÙŠØ§Ù‹.",
        rating: 8.4,
        food: 8.6, service: 8.1, cleanliness: 8.5, price: 8.8,
        status: "closed", hours: "11:30 â€“ 22:00"
      },
      {
        lat: 36.8820, lng: 6.9070,
        name: "Ù…Ø·Ø¹Ù… Ø§Ù„Ø¨Ù‡Ø¬Ø©",
        nameEn: "El Bahdja",
        type: "Ø£ÙƒÙ„Ø§Øª Ø³Ø±ÙŠØ¹Ø©",
        icon: "ğŸ”",
        description: "Ø£ÙƒÙ„Ø§Øª Ø³Ø±ÙŠØ¹Ø© Ù…ØªÙ†ÙˆØ¹Ø© Ø¨Ø£Ø³Ø¹Ø§Ø± Ù…Ù†Ø§Ø³Ø¨Ø© ÙˆØ®Ø¯Ù…Ø© Ø³Ø±ÙŠØ¹Ø©.",
        rating: 8.2,
        food: 8.4, service: 8.0, cleanliness: 8.1, price: 9.2,
        status: "open", hours: "10:00 â€“ 01:00"
      },
      {
        lat: 36.8730, lng: 6.9110,
        name: "Ù…Ø·Ø¹Ù… Ø§Ù„Ø±ÙŠÙ",
        nameEn: "El Rif",
        type: "Ù…Ø´Ø§ÙˆÙŠ Ø¹Ø§Ø¦Ù„ÙŠØ©",
        icon: "ğŸ¥©",
        description: "Ù…Ø·Ø¹Ù… Ø¹Ø§Ø¦Ù„ÙŠ Ù…Ø´Ù‡ÙˆØ± Ø¨Ø§Ù„Ù…Ø´Ø§ÙˆÙŠ ÙˆØ§Ù„Ø£Ø·Ø¨Ø§Ù‚ Ø§Ù„ØªÙ‚Ù„ÙŠØ¯ÙŠØ© Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠØ©.",
        rating: 8.7,
        food: 9.0, service: 8.4, cleanliness: 8.6, price: 8.5,
        status: "open", hours: "12:00 â€“ 23:30"
      }
    ];

    // â”€â”€â”€ Ø¯ÙˆØ§Ù„ Ù…Ø³Ø§Ø¹Ø¯Ø© â”€â”€â”€
    function stars(n) {
      const full = Math.round(n / 2);
      return "â˜…".repeat(full) + "â˜†".repeat(5 - full);
    }

    function barColor(n) {
      if (n >= 9) return "linear-gradient(90deg,#22c55e,#4ade80)";
      if (n >= 8) return "linear-gradient(90deg,#eab308,#facc15)";
      if (n >= 7) return "linear-gradient(90deg,#f97316,#fb923c)";
      return "linear-gradient(90deg,#ef4444,#f87171)";
    }

    function subRating(label, value) {
      const pct = value * 10;
      return `
        <div class="sub-item">
          <span class="lbl">${label}</span>
          <div class="bar-wrap">
            <div class="bar-fill" style="width:${pct}%;background:${barColor(value)}"></div>
          </div>
          <strong>${value}</strong>
        </div>
      `;
    }

    function buildPopup(r) {
      const isOpen = r.status === "open";
      return `
        <div class="card">
          <div class="card-header">
            <div class="card-icon">${r.icon}</div>
            <div>
              <div class="name">${r.name}</div>
              <div class="type">${r.type}</div>
            </div>
          </div>

          <p class="desc">${r.description}</p>

          <div class="rating-box">
            <div class="stars">${stars(r.rating)}</div>
            <div class="score">${r.rating}</div>
          </div>

          <div class="sub-ratings">
            ${subRating("Ø¬ÙˆØ¯Ø© Ø§Ù„Ø£ÙƒÙ„", r.food)}
            ${subRating("Ø§Ù„Ø®Ø¯Ù…Ø©", r.service)}
            ${subRating("Ø§Ù„Ù†Ø¸Ø§ÙØ©", r.cleanliness)}
            ${subRating("Ø§Ù„Ø³Ø¹Ø± / Ø§Ù„Ø¬ÙˆØ¯Ø©", r.price)}
          </div>

          <div class="info-row">
            <span class="label">â° Ø£ÙˆÙ‚Ø§Øª Ø§Ù„Ø¹Ù…Ù„</span>
            <span>${r.hours}</span>
          </div>
          <div class="info-row">
            <span class="label">ğŸ“Œ Ø§Ù„Ø­Ø§Ù„Ø©</span>
            <span class="badge ${isOpen ? 'open' : 'closed'}">
              <span style="font-size:7px;">â—</span>
              ${isOpen ? "Ù…ÙØªÙˆØ­" : "Ù…ØºÙ„Ù‚"}
            </span>
          </div>
        </div>
      `;
    }

    // â”€â”€â”€ Ø±Ø³Ù… Ø§Ù„Ù…Ø§Ø±ÙƒØ±Ø§Øª â”€â”€â”€
    let markers = [];

    function renderMarkers(list) {
      markers.forEach(m => map.removeLayer(m));
      markers = [];

      list.forEach(r => {
        const m = L.marker([r.lat, r.lng], { icon: createPin(r.icon) })
          .addTo(map)
          .bindPopup(buildPopup(r), {
            maxWidth: isMobile ? 265 : 310,
            closeButton: true,
            autoPan: true,
            autoPanPadding: L.point(20, 60)
          });
        m._data = r;
        markers.push(m);
      });

      document.getElementById("counter").innerHTML =
        `ğŸ´ <strong>${list.length}</strong> / <strong>${restaurants.length}</strong> Ù…Ø·Ø¹Ù…`;
    }

    renderMarkers(restaurants);

    // â”€â”€â”€ Ø§Ù„Ø¨Ø­Ø« â”€â”€â”€
    document.getElementById("search").addEventListener("input", function () {
      const q = this.value.trim().toLowerCase();
      if (!q) { renderMarkers(restaurants); return; }

      const filtered = restaurants.filter(r =>
        r.name.includes(q) ||
        r.nameEn.toLowerCase().includes(q) ||
        r.type.includes(q) ||
        r.description.includes(q)
      );
      renderMarkers(filtered);

      if (filtered.length && markers.length) {
        const group = L.featureGroup(markers);
        map.fitBounds(group.getBounds().pad(0.3), { animate: true, duration: 0.5 });
      }
    });

    // â”€â”€â”€ Ø¥ØºÙ„Ø§Ù‚ Popup Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø±ÙŠØ·Ø© (Ø£Ø³Ù‡Ù„ Ù„Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„) â”€â”€â”€
    map.on("click", function () {
      map.closePopup();
    });
  </script>
</body>
</html>
